#include <curl/curl.h>

int main() {
  CURL *curl;
  CURLcode res;

  curl_global_init(CURL_GLOBAL_DEFAULT);

  curl = curl_easy_init();
  if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, "http://127.1:8000/");

    /* 设置使用socks5代理 */
    curl_easy_setopt(curl, CURLOPT_PROXY, "socks5h://127.0.0.1:10801/");
  
    /* 初始化协议为socks5 */
    curl_easy_setopt(curl, CURLOPT_PROXYTYPE, CURLPROXY_SOCKS5);
    
    /* ALLOW FOLLOWLOCATION */
    curl_easy_setopt(curl, CURLOPT_FOLLOWLOCATION, 1L);

    res = curl_easy_perform(curl);

    curl_easy_cleanup(curl);
  }

  curl_global_cleanup();

  return 0;
}
